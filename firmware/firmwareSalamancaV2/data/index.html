<!DOCTYPE html>
  <!-- Coding by CodingLab | www.codinglabweb.com -->
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!----======== CSS ======== -->
    <link rel="stylesheet" href="css/panel.css">
    <link rel="stylesheet" href="css/switchToggles.css">
    
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.12.4/dist/sweetalert2.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/editNameRelays.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const isAuthenticated = localStorage.getItem('authenticated');
            if (!isAuthenticated) {
                window.location.href = '/login'; // Redirigir al login si no está autenticado
            }
        });
    </script>

    
    <!----===== Boxicons CSS ===== -->
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="icon" href="https://i.ibb.co/hVN5hpX/favicon-Dark-smart-PDU-2.png" type="image/x-icon">
    
    <!--<title>Dashboard Sidebar Menu</title>--> 
</head>
<body>
    
    <nav class="sidebar close">
        <header>
            <div class="image-text">
                <span class="logo">
                    <img src="https://i.ibb.co/hVN5hpX/favicon-Dark-smart-PDU-2.png" width="50px" >
                </span>

                <div class="text logo-text">
                    <span class="name">SmartPDU®</span>
                    <span class="profession">Dashboard</span>
                </div>
            </div>

            <i class='bx bx-chevron-right toggle'></i>
        </header>

        <div class="menu-bar">
            <div class="menu">

                <li class="search-box">
                    <i class='bx bx-search icon'></i>
                    <input type="text" placeholder="Search...">
                </li>

                <ul class="menu-links">
                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-home-alt icon' ></i>
                            <span class="text nav-text">Dashboard</span>
                        </a>
                    </li>

<!--                     <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-bar-chart-alt-2 icon' ></i>
                            <span class="text nav-text">Revenue</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-bell icon'></i>
                            <span class="text nav-text">Notifications</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-pie-chart-alt icon' ></i>
                            <span class="text nav-text">Analytics</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-heart icon' ></i>
                            <span class="text nav-text">Likes</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-wallet icon' ></i>
                            <span class="text nav-text">Wallets</span>
                        </a>
                    </li>

                </ul>
            </div> -->

            <div class="bottom-content">
                <li class="">
                    <a href="/login"  id="logout-button">
                        <i class='bx bx-log-out icon' ></i>
                        <span class="text nav-text">Logout</span>
                    </a>
                </li>

                <li class="mode">
                    <div class="sun-moon">
                        <i class='bx bx-moon icon moon'></i>
                        <i class='bx bx-sun icon sun'></i>
                    </div>
                    <span class="mode-text text">Dark mode</span>

                    <div class="toggle-switch">
                        <span class="switch"></span>
                    </div>
                </li>
                
            </div>
        </div>

    </nav>

    <section class="home">
        <div class="header-container">
            <div class="text">Dashboard de Administración PDU</div>
            
        </div>
        <!-- Pop-up para mostrar el log de reinicios -->
        <div id="resetLogPopup" class="popup hidden">
            <div class="popup-content">
                <span class="close-btn" id="closePopup">&times;</span>
                <h3>Registro de Reinicios</h3>
                <div id="resetLogContent">Cargando registro...</div>
            </div>
        </div>
    
        <div class="sensor-container">
            <div class="sensor-data">
                <h2>Datos PDU</h2>
                <div class="sensor-box">
                    <p><i class="fas fa-microchip device-icon">&nbsp;&nbsp;</i> Dispositivo: &nbsp;&nbsp; <span id="device">--</span></p>
                    <p><i class="fas fa-barcode barcode-icon"></i>&nbsp;&nbsp; ID Serie PDU: &nbsp;&nbsp; <span id="id-serie-pdu">--</span></p>
                    <p><i class="fas fa-network-wired ip-icon"></i>&nbsp;&nbsp;IP AP: &nbsp;&nbsp;<span id="ip-ap">--</span></p>
                    <p><i class="fas fa-redo-alt reset-icon"></i><span class="reset-text">Reinicios: <span id="resetCount">--</span></span>
                        <i class="fas fa-info-circle info-icon" id="resetLogIcon"></i> </p>
                    <!-- <div class="reset-counter">                       
                    </div> -->
                </div>
            </div>
            <div class="sensor-data">
                <h2>Datos de Red</h2>
                <div class="sensor-box">
                    <p><i class="fas fa-power-off"></i>&nbsp;Reset Modo AP: &nbsp;&nbsp;<label class="switchAp" id="switchAp"><input type="checkbox" id="resetAp"><span class="slider"></span></label></p>
                    <p><i class="fas fa-server">&nbsp;&nbsp;</i> IP WebServer: &nbsp;&nbsp;<span id="ip-webserver">--</span></p>
                    <p><i class="fas fa-wifi wifi-icon"></i>&nbsp;&nbspSSID WiFi: &nbsp;&nbsp;<span id="ssid-wifi">--</span></p>  
                    <p><i class="fas fa-signal signal-icon"></i>&nbsp;&nbspSeñal de Wi-Fi: &nbsp;&nbsp;<span id="wifi-signal">--</span> %</p>                         
                    
                </div>
            </div>
    
            <div class="sensor-data">
                <h2>Parámetros PDU</h2>
                <div class="sensor-box">
                    <p><i class="fas fa-bolt co-icon">&nbsp;&nbsp;</i>Corriente (AC): &nbsp;&nbsp;<span id="current">--</span></p>
                    <p><i class="fas fa-bolt co-icon">&nbsp;&nbsp;</i>Voltaje (VAC): &nbsp;&nbsp;&nbsp;<span id="voltage">--</span></p>
                    <p><i class="fas fa-bolt co-icon">&nbsp;&nbsp;</i>Potencia Aparente: &nbsp;&nbsp;&nbsp;<span id="apparent-power">--</span></p>
                    <p><i class="fas fa-bolt co-icon">&nbsp;&nbsp;</i>Potencia Activa: &nbsp;&nbsp;&nbsp;<span id="active-power">--</span></p>
                    <p><i class="fas fa-bolt co-icon">&nbsp;&nbsp;</i>Consumo Total: &nbsp;&nbsp;&nbsp;<span id="energy-consumption">--</span></p>
                    <p><i class="fas fa-bolt co-icon">&nbsp;&nbsp;</i>Frecuencia (Hz): &nbsp;&nbsp;&nbsp;<span id="frequency">--</span></p>
                    <p><i class="fas fa-bolt co-icon">&nbsp;&nbsp;</i>Factor de Potencia: &nbsp;&nbsp;&nbsp;<span id="power-factor">--</span></p>
                </div>
            </div>
            
            <div class="sensor-data">
                <h2>Ambiente</h2>
                <div class="sensor-box">
                    <p><i class="fas fa-thermometer-half temperature-icon">&nbsp;&nbsp;</i>Temperatura:&nbsp;&nbsp;<span id="temperature">--</span> °C</p>
                    <p><i class="fas fa-tint humidity-icon">&nbsp;&nbsp;</i>Humedad:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id="humidity">--</span> %</p>
                </div>
            </div>
        </div>

        <main>
            <div class="reles-container">
                <div class="rele-box">
                    <h5>SW1</h5>
                    <div class="switch-icon-container">
                        <label class="switchPlug">
                            <input type="checkbox" id="rele1">
                            <span class="sliderPlug"></span>
                        </label>
                        <i id="lamp-icon-1" class="fas fa-plug"></i> <!-- Icono de lámpara -->
                    </div>
                    <br>
                    <h2 id="device-name-1">Toma 1 <i class="fas fa-edit edit-icon" data-id="1"></i></h2>
                </div>
                               
                
                <div class="rele-box">
                    <h5>SW2</h5>
                    <div class="switch-icon-container">
                        <label class="switchPlug">
                            <input type="checkbox" id="rele2">
                            <span class="sliderPlug"></span>
                        </label>
                        <i id="lamp-icon-2" class="fas fa-plug"></i> <!-- Icono de lámpara -->
                    </div>
                    <br>
                    <h2 id="device-name-2">Toma 2 <i class="fas fa-edit edit-icon" data-id="2"></i></h2>
                </div>

                <div class="rele-box">
                    <h5>SW3</h5>                    
                    <div class="switch-icon-container">
                        <label class="switchPlug">
                            <input type="checkbox" id="rele3">
                            <span class="sliderPlug"></span>
                        </label>
                        <i id="lamp-icon-3" class="fas fa-plug"></i> <!-- Icono de lámpara -->
                    </div>
                    <br>
                    <h2 id="device-name-3">Toma 3 <i class="fas fa-edit edit-icon" data-id="3"></i></h2>
                </div>
                <div class="rele-box">
                    <h5>SW4</h5>                    
                    <div class="switch-icon-container">
                        <label class="switchPlug">
                            <input type="checkbox" id="rele4">
                            <span class="sliderPlug"></span>
                        </label>
                        <i id="lamp-icon-4" class="fas fa-plug"></i> <!-- Icono de lámpara -->
                    </div>
                    <br>
                    <h2 id="device-name-4">Toma 4 <i class="fas fa-edit edit-icon" data-id="4"></i></h2>
                </div>
                <div class="rele-box">
                    <h5>SW5</h5>                    
                    <div class="switch-icon-container">
                        <label class="switchPlug">
                            <input type="checkbox" id="rele5">
                            <span class="sliderPlug"></span>
                        </label>
                        <i id="lamp-icon-5" class="fas fa-plug"></i> <!-- Icono de lámpara -->
                    </div>
                    <br>
                    <h2 id="device-name-5">Toma 5 <i class="fas fa-edit edit-icon" data-id="5"></i></h2>
                </div>
                <div class="rele-box">
                    <h5>SW6</h5>                    
                    <div class="switch-icon-container">
                        <label class="switchPlug">
                            <input type="checkbox" id="rele6">
                            <span class="sliderPlug"></span>
                        </label>
                        <i id="lamp-icon-6" class="fas fa-plug"></i> <!-- Icono de lámpara -->
                    </div>
                    <br>
                    <h2 id="device-name-6">Toma 6 <i class="fas fa-edit edit-icon" data-id="6"></i></h2>
                </div>
                
                
        </main>

        <footer>
            <p>© 2024 SmartPDU® All rights reserved <!-- - Developed by <a href="https://electronicagambino.com" style="color: #ccc; text-decoration: none;">AÚN SIN MARCA jejeje</a> --></p>
        </footer>

    </script>
    <script src="js/panel.js"></script>
    <script src="https://cdn.socket.io/4.4.1/socket.io.min.js"></script>
    <script src="js/editNameRelays.js"></script>
    <script src="js/login.js"></script>
    <script src="js/resetAP.js"></script>
    <script>
        document.getElementById('logout-button').addEventListener('click', function() {
            localStorage.removeItem('authenticated'); // Eliminar autenticación
        });
    </script>
    
</body>
</html>